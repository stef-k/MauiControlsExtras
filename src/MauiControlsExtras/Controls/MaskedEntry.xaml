<?xml version="1.0" encoding="utf-8" ?>
<base:TextStyledControlBase xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                            xmlns:base="clr-namespace:MauiControlsExtras.Base"
                            x:Class="MauiControlsExtras.Controls.MaskedEntry"
                            x:Name="thisControl">

    <Border StrokeThickness="{Binding EffectiveBorderThickness, Source={x:Reference thisControl}}"
            Stroke="{Binding CurrentBorderColor, Source={x:Reference thisControl}}"
            BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#424242}"
            Padding="12,0"
            HeightRequest="48">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="{Binding EffectiveCornerRadius, Source={x:Reference thisControl}}" />
        </Border.StrokeShape>

        <Grid ColumnDefinitions="*,Auto">
            <Entry x:Name="entry"
                   Grid.Column="0"
                   Placeholder="{Binding Placeholder, Source={x:Reference thisControl}}"
                   PlaceholderColor="{Binding EffectivePlaceholderColor, Source={x:Reference thisControl}}"
                   TextColor="{Binding EffectiveTextColor, Source={x:Reference thisControl}}"
                   FontSize="{Binding EffectiveFontSize, Source={x:Reference thisControl}}"
                   FontFamily="{Binding EffectiveFontFamily, Source={x:Reference thisControl}}"
                   BackgroundColor="Transparent"
                   IsPassword="{Binding IsPassword, Source={x:Reference thisControl}}"
                   Keyboard="{Binding EntryKeyboard, Source={x:Reference thisControl}}"
                   TextChanged="OnEntryTextChanged"
                   Focused="OnEntryFocused"
                   Unfocused="OnEntryUnfocused"
                   Completed="OnEntryCompleted" />

            <!-- Validation Icon -->
            <Label x:Name="validationIcon"
                   Grid.Column="1"
                   FontSize="16"
                   VerticalOptions="Center"
                   IsVisible="{Binding ShowValidationIcon, Source={x:Reference thisControl}}"
                   Text="{Binding ValidationIconText, Source={x:Reference thisControl}}"
                   TextColor="{Binding ValidationIconColor, Source={x:Reference thisControl}}" />
        </Grid>
    </Border>
</base:TextStyledControlBase>
