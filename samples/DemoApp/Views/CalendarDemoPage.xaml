<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:DemoApp.ViewModels"
             xmlns:extras="clr-namespace:MauiControlsExtras.Controls;assembly=MauiControlsExtras"
             x:Class="DemoApp.Views.CalendarDemoPage"
             x:DataType="vm:CalendarDemoViewModel"
             Title="Calendar">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            <!-- Title -->
            <Label Text="Calendar Demo" Style="{StaticResource PageTitleStyle}" />
            <Label Text="A date picker calendar with single, multiple, and range selection modes."
                   Style="{StaticResource PageDescriptionStyle}" />

            <!-- Single Date Selection -->
            <Frame Style="{StaticResource DemoCardStyle}">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Single Date Selection" Style="{StaticResource SectionTitleStyle}" />
                    <Label Text="Click a date to select it." Style="{StaticResource SectionDescriptionStyle}" />

                    <extras:Calendar SelectedDate="{Binding SelectedDate}"
                                     SelectionMode="Single"
                                     MinDate="{Binding MinimumDate}"
                                     MaxDate="{Binding MaximumDate}"
                                     HorizontalOptions="Start" />

                    <Label Text="{Binding SelectedDate, StringFormat='Selected: {0:D}', TargetNullValue='No date selected'}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Range Selection -->
            <Frame Style="{StaticResource DemoCardStyle}">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Date Range Selection" Style="{StaticResource SectionTitleStyle}" />
                    <Label Text="Click to select start date, then click again for end date." Style="{StaticResource SectionDescriptionStyle}" />

                    <extras:Calendar x:Name="rangeCalendar"
                                     SelectionMode="Range"
                                     DateSelected="OnRangeDateSelected"
                                     HorizontalOptions="Start" />

                    <HorizontalStackLayout Spacing="20">
                        <Label Text="{Binding RangeStartDate, StringFormat='From: {0:d}', TargetNullValue='From: -'}"
                               VerticalOptions="Center" />
                        <Label Text="{Binding RangeEndDate, StringFormat='To: {0:d}', TargetNullValue='To: -'}"
                               VerticalOptions="Center" />
                        <Button Text="Clear Range"
                                Clicked="OnClearRangeClicked"
                                Padding="12,6"
                                FontSize="12" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Multiple Selection -->
            <Frame Style="{StaticResource DemoCardStyle}">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Multiple Date Selection" Style="{StaticResource SectionTitleStyle}" />
                    <Label Text="Click multiple dates to select them. Click again to deselect." Style="{StaticResource SectionDescriptionStyle}" />

                    <extras:Calendar x:Name="multipleCalendar"
                                     SelectionMode="Multiple"
                                     DateSelected="OnMultipleDateSelected"
                                     HorizontalOptions="Start" />

                    <HorizontalStackLayout Spacing="20">
                        <Label x:Name="multipleDatesLabel" Text="0 dates selected" VerticalOptions="Center" />
                        <Button Text="Clear Selection"
                                Clicked="OnClearMultipleClicked"
                                Padding="12,6"
                                FontSize="12" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Header Styling -->
            <Frame Style="{StaticResource DemoCardStyle}">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Header Styling" Style="{StaticResource SectionTitleStyle}" />
                    <Label Text="Customize the month/year navigation header appearance." Style="{StaticResource SectionDescriptionStyle}" />

                    <extras:Calendar SelectionMode="Single"
                                     HeaderBackgroundColor="#6200EE"
                                     HeaderTextColor="White"
                                     HeaderFontSize="18"
                                     HeaderFontAttributes="Bold"
                                     HeaderPadding="12,8"
                                     HorizontalOptions="Start" />
                </VerticalStackLayout>
            </Frame>

            <!-- Status -->
            <Label Text="{Binding StatusMessage}" Style="{StaticResource StatusLabelStyle}" />
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
